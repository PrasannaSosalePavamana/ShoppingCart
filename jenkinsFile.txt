pipeline {

    agent any
    tools {
        maven 'LocalMaven' 
    }
 stages {
  stage('SCM') {
  steps{
    git 'https://github.com/foo/bar.git'
    }
  }
  stage('SonarQube analysis') {

    // requires SonarQube Scanner 2.8+
    def scannerHome = tool 'SonarQube Scanner 2.8';
    withSonarQubeEnv('My SonarQube Server') {
      sh "${C:/Program Files (x86)/sonar-scanner}/bin/sonar-scanner"
    
  }
}
   
        stage('Compile stage') {
            steps {
                bat "mvn clean compile" 
        }
    }

          stage('deployment stage') {
              steps {
                bat "mvn test"
        }
    }

  }

}
